<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>AGRage</title>
	<link rel="stylesheet" href="/css/milligram.min.css" />
	<link rel="stylesheet" href="/css/main.css" />

	<!--<link rel="stylesheet" href="/components/button/button.css" /> -->
	<link rel="stylesheet" href="/components/chat/chat.css" />
</head>

<body>

	<div class="bg">
		<div class="js-main" hidden="hidden"> </div>
		<div class="js-login" hidden="hidden"></div>
		<div class="js-regist" hidden="hidden"></div>
		<div class="js-chat" hidden="hidden"></div>
		<div class="js-menu" hidden="hidden"></div>
		<div class="js-config" hidden="hidden"></div>
		<div class="js-profile" hidden="hidden"></div>
		<div class="js-searchGame" hidden="hidden"></div>
		<div class="js-rating" hidden="hidden"></div>
	</div>
	<div class="js-game gamebg" id="myGame" hidden="hidden">
		<canvas class="js-canvas"></canvas>
	</div>


	<!-- <script src="/models/message.js"></script> -->

	<script src="/models/user.js"></script>
	<script src="/components/block/block.js"></script>
	<script src="/components/button/button.js"></script>
	<script src="/components/form/form.tmpl.js"></script>
	<script src="/components/form/form.js"></script>
	<script src="/components/chat/chat.tmpl.js"></script>
	<script src="/components/chat/chat.js"></script>
	<script src="/modules/cookie.js"></script>

	<script src="/game/user_panel.js"></script>
	<script src="/game/gamebutton.js"></script>
	<script src="/game/bot.js"></script>
	<script src="/game/sprite.js"></script>
	<script src="/libs/technolibs/index.js"></script>
	<script src="/modules/pathToRegex.js"></script>
	<script src="/modules/view.js"></script>
	<script src="/modules/model.js"></script>
	<script src="/modules/route.js"></script>
	<script src="/modules/router.js"></script>
	<script src="/game/keymaster.js"></script>
	<script src="/game/unit1.js"></script>
	<script src="/game/tower.js"></script>
	<script src="/game/tower_defence.js"></script>






	<script src="/views/mainView.js"></script>
	<script src="/views/gameView.js"></script>
	<script src="/views/loginView.js"></script>
	<script src="/views/registView.js"></script>
	<script src="/views/menuView.js"></script>
	<script src="/views/chat.js"></script>
	<script src="/views/configView.js"></script>
	<script src="/views/profileView.js"></script>
	<script src="/views/onlineGameView.js"></script>
	<script src="/views/ratingView.js"></script>
	<script src="/views/chat.js"></script>
	<script src="main.js"></script>

	<script language="javascript" type="text/javascript">

  var wsUri = "wss://agragebackend.herokuapp.com/api/game/";
  var output;

  function init()
  {
    output = document.getElementById("output");
    testWebSocket();
  }

  function testWebSocket()
  {
    websocket = new WebSocket(wsUri);
    websocket.onopen = function(evt) { onOpen(evt) };
    websocket.onclose = function(evt) { onClose(evt) };
    websocket.onmessage = function(evt) { onMessage(evt) };
    websocket.onerror = function(evt) { onError(evt) };
  }

  function onOpen(evt)
  {
  	console.log("CONNECTED")
    //writeToScreen("CONNECTED");
    doSend("WebSocket rocks");
  }

  function onClose(evt)
  {
  	console.log("DISCONNECTED")
    //writeToScreen("DISCONNECTED");
  }

  function onMessage(evt)
  {
    
    console.log("RESPONSE:"  + evt.data)
    //writeToScreen('<span style="color: blue;">RESPONSE: ' + evt.data+'</span>');
    websocket.close();
  }

  function onError(evt)
  {
    console.log("Error:"  + evt.data)
    //writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data);
  }

  function doSend(message)
  {
    console.log("SENT:"  + message)
    //writeToScreen("SENT: " + message);
    websocket.send(message);
  }

  function writeToScreen(message)
  {
    var pre = document.createElement("p");
    pre.style.wordWrap = "break-word";
    pre.innerHTML = message;
    output.appendChild(pre);
  }

  window.addEventListener("load", init, false);

  </script>
</body>

</html>
